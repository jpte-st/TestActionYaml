name: Yest FE build

on:
  release:
    types: [published]

# Push ì‹œ ì²´í¬ í•„ìš” ì‹œ
#  push:
#    branches: [ main ]

## ìˆ˜ë™ ì‹¤í–‰
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest
    permissions:
      contents: read

    steps:
      - name: ğŸ›ï¸ Checkout code
        uses: actions/checkout@v4

      - name: ğŸ’¾ Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'

      - name: ğŸ“¥ Install dependencies
        run: npm install

      - name: ğŸ—ï¸ Build
        run: npm run build

      - name: ğŸ“¦ Archive production artifacts
        uses: actions/upload-artifact@v4
        with:
          name: dist-without-markdown
          path: |
            dist
            !dist/**/*.md

# ë°±ì—”ë“œ Repositoryì— ë°°í¬
      - name: ğŸš€ Deploy
        uses: s0/git-publish-subdir-action@develop
        env:
          REPO: git@github.com:jpjp84/Acon.git
          BRANCH: main
          FOLDER: dist
          SSH_PRIVATE_KEY: ${{ secrets.DEPLOY_PRIVATE_KEY }}

# ì»¤ë²„ë¦¬ì§€ íŒŒì¼ ìƒì„±
#      - name: Archive code coverage results
#        uses: actions/upload-artifact@v4
#        with:
#          name: code-coverage-report
#          path: output/test/code-coverage.html

# Github Page ë°°í¬ìš©(storybook)
#      - name: ğŸš€Deploy to GitHub PagesğŸš€
#        uses: JamesIves/github-pages-deploy-action@4.1.5
#        with:
#          branch: gh-pages
#          folder: public

# ë°±ì—”ë“œ Repositoryì— ë°°í¬
#      - name: Deploy
#        uses: s0/git-publish-subdir-action@develop
#        env:
#          REPO: self
#          BRANCH: gh-pages
#          FOLDER: public/site
#          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}